---
draw:
tags: []
title: 分库分表
date created: 2024-07-14
date modified: 2024-12-27
---

分表是增加单位数据所享有的CRUD 资源，分库是增加单位数据所享有的数据库基建。分表解决的是大数据量的问题，分库解决的是高并发的问题。

分库分表就像把一个大超市拆分成多个小超市：

分库：把一个大数据库拆成多个独立的小数据库

- 比如按用户ID分，北京用户的数据放A库，上海用户放B库

分表：把一张大表拆成多张小表

- 比如把订单表按年份分，2023年订单放orders_2023表，2024年放orders_2024表

主要目的：

- 解决数据量太大导致查询慢
- 避免单个数据库压力太大

就像大超市顾客太多会拥堵，分成小超市后，每家店顾客都变少了，服务也更快了。

在面试时被问到，为什么 MySQL 数据库数据量大了要进行分库分表？- Coder 的技术之路的回答 - 知乎  
https://www.zhihu.com/question/459955079/answer/1904557377

在让你设计分库分表的时候，一定要知道，**分库、分表、分库分表他是三件事**儿，不是一件事儿。所以首先你要说的就是我们需要考虑是否需要分库、是否需要分表。

如果说做这个方案的目的是为了解决单表数据量太大，查询效率慢的问题，那分表就够了，把这些数据分散到不同的表中，让每一张单表的数据量变小，那就可以了。

如果说，做这个方案的目的，是为了解决并发量太高，数据库连接数不够、数据库的资源性能（内存、CPU、磁盘）不够的问题，那就需要做分库，用更多的数据库实例来抗更高的并发。

所以说，**分表解决的是大数据量的问题，分库解决的是高并发的问题**。但一般来说，高并发往往伴随着大数据量，所以很多时候分库分表是一起做的。但是也不绝对。有些系统就是并发不高，但是年头很多了，数据量很大。
