---
draw:
title: 蒙特卡洛树
date created: 2025-03-03
date modified: 2025-06-15
---
**蒙特卡洛树算法（Monte Carlo Tree Search，简称MCTS）**，听起来复杂，其实背后的思想非常简单、有趣。让我用一个通俗易懂的小故事来解释一下：

---

## 🌳 一、先说什么叫"蒙特卡洛"

**蒙特卡洛（Monte Carlo）** 是欧洲一个著名的赌场（位于摩纳哥），以赌博闻名。所以以"蒙特卡洛"命名的算法，都有一个共同点：

> **靠大量随机的"尝试"和"模拟"，帮助我们找到更好的策略。**

就像赌场中不断玩游戏、不断摸索，总结规律一样。

---

## 🧩 二、什么是"树搜索"

**树搜索（Tree Search）** 就是不断考虑各种可能出现的情况，并把这些情况整理成一棵树状图：

> 比如下围棋时，从现在这一盘的局面开始，每下一步，棋局的变化都可能有好多种情况，每一种可能性可以看作树上的一条分支。

但是，这棵"可能性"的树经常巨大无比，我们根本没法把每一种可能都思考完。这时就需要有一些巧妙的策略，帮助我们快速决定探索哪些分支。

---

## 🎲 三、蒙特卡洛树搜索 = 大量随机尝试 + 智能树搜索

蒙特卡洛树搜索把上面两个想法结合起来：

- **树**：考虑每一步可能的选择（一步步尝试）。
- **蒙特卡洛**：每一次尝试时，并不是死板地去计算，而是随机地模拟后续的发展，看看结果如何。

说得再简单些：

> 如果下棋时不知道怎么走更好，那就随机地向前多试几次，看看哪一步最终的结果更好，就选择它！

---

## 🎯 四、MCTS 算法具体怎么做？一个例子来讲清楚

假设你在下五子棋，目前局面复杂，你不知道接下来一步应该怎么走。这时候 MCTS 的大致步骤是：

### **1. 选择 (Selection)**

先从目前状态（树根）开始，向下**选择一些看起来比较有潜力的棋步**走下去。

**怎么判断潜力？**  
通常是选择那些之前模拟结果比较好的分支，简单说就是之前"胜率"较高的那些节点。

> 比如，我之前发现下在中间位置赢的次数比较多，那我就先优先去探索这个位置。

### **2. 扩展 (Expansion)**

选到一个之前没仔细探索过的位置后，**新增一些可能的下一步**，相当于给树增加新枝。

> 比如，棋盘上的这个位置没下过，那就试试这里，然后再看看接下来有哪些位置可走。

### **3. 模拟 (Simulation)**（蒙特卡洛随机尝试）

随机从刚刚扩展的这一步开始，**随意模拟接下来的情况**，一直模拟到游戏结束（赢或输）。

**为什么随机？** 因为我们并不知道后续怎样走最好，就随便走走看。

> 比如，从现在的位置开始，我随机下几步，一直到这盘棋结束，看看是赢了还是输了。

### **4. 回传 (Backpropagation)**

把这一次模拟的结果（胜或负）**回溯到前面的每一步**，更新之前走过的每一步的"统计数据"。

> 比如，如果这次随机模拟的结果是赢了，那从刚才扩展的位置一路返回，每个经过的棋步都会记一次"赢"的记录，这样下次更可能被选中。

---

## 🔄 五、反复循环，形成更聪明的决策

不断重复上述的过程：

```Java
选择 → 扩展 → 模拟 → 回传
选择 → 扩展 → 模拟 → 回传
……
```

在经历大量这样的随机模拟后：

- 一些好棋步就会积累很多"获胜"的数据，下次选择时更可能被选中。
- 不好的棋步，慢慢地被淘汰，不再被选到。

这样逐渐地，算法就能"摸索"出最好的一步了。

---

## 🚗 六、类比一个生活中的小例子

假设你要决定怎么开车从家到商场，但路上有很多种走法，你不知道哪个最快：

- **选择**：先挑一条看起来还不错的路试试。
- **扩展**：到达新路口后，发现几条之前没走过的小路，记录下来。
- **模拟**：随机尝试选一条小路一直走下去，看看能不能很快到商场。
- **回传**：如果这次走的路用时很短，就记录下"快"的评价，下次再遇到类似的路口，这条路就被优先考虑。

不断重复这些随机尝试，你很快就能找到最快的路。

---

## 📌 七、小结（蒙特卡洛树算法的核心思想）

- 面对太复杂、没法算清楚的情况，不靠精确计算，而是靠**随机尝试**。
- 用随机尝试的结果**积累经验**，慢慢找到**更好、更有可能成功**的策略。
- 反复执行，逐渐**智能化**决策过程。

MCTS因为简单有效，已广泛应用在：

- 游戏AI（比如围棋的AlphaGo）
- 自动驾驶路线规划
- 机器人路径规划
- 决策系统优化

它用简单的随机尝试，最终获得了惊人的决策能力，成为人工智能领域非常重要的一种算法策略。
