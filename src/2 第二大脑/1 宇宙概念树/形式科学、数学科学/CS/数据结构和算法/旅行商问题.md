---
draw:
title: 旅行商问题
date created: 2025-06-22
date modified: 2025-06-22
---
**旅行商问题（Traveling Salesman Problem, TSP）就是：**  
给定若干城市及两两之间的距离，找一条**最短**的闭合路线（起点 = 终点），要求**恰好**访问每个城市一次。

下面先用一句话回答你的直觉，再分层展开——

> **旅行商问题（Traveling Salesman Problem, TSP）就是：**  
> 给定若干城市及两两之间的距离，找一条**最短**的闭合路线（起点 = 终点），要求**恰好**访问每个城市一次。

---

## 1. “一条线连所有点”≠随便连

- **随便连**：任意把点串成折线当然也能把所有点“连起来”，但距离往往冗长。
    
- **TSP 要求**：
    
    1. **过且只过一次**——不能跳过，也不能重复。
        
    2. **总长度最短**——这才是难点。
        
    3. **回到出发点**（如果是 **Hamilton 路径** 而非 **Hamilton 回路**，可不回到起点）。
        

---

## 2. Hamilton 路径 / 回路 vs. TSP

|概念|约束|目标|难度|
|---|---|---|---|
|**Hamilton 路径**|过所有点一次，不必回起点|只问“是否存在”|NP-Complete|
|**Hamilton 回路**|过所有点一次，最后回起点|同上|NP-Complete|
|**TSP**|过所有点一次，最后回起点|**长度/成本最小**|NP-Hard (更难)|

> 可以把 TSP 看作“带权 Hamilton 回路”的最优化版。

---

## 3. 为什么 TSP 难？

- **可能路线数**：对 n 个城市，可能的回路有 (n − 1)! / 2 条。
    
    - 10 个城市 ≈ 181 440 条
        
    - 20 个城市 ≈ 1.2 × 10^18 条
        
- 穷举几乎不现实；TSP 被证明是 **NP-Hard**：目前没人找到对所有实例都能在多项式时间里给出最优解的算法。
    

---

## 4. 经典算法与套路

|类型|思路|复杂度/误差|备注|
|---|---|---|---|
|**暴力枚举**|全排列|O(n!)|只适合 n≤10|
|**分支限界**|剪掉明显次优分支|仍指数级|实践中比纯暴力快很多|
|**动态规划（Held–Karp）**|状态=子集+终点|O(n²·2ⁿ)|n≤25 常用|
|**整型规划 + 割平面**|把 TSP 写成 ILP，逐步添加割|工程界求最优解的王牌||
|**启发式/近似**|Nearest-Neighbor, 2-Opt, 3-Opt|省时但可能较差|秒级给近似，常见于地理导航|
|**Christofides 算法**|生成 MST + 最小完美匹配|≤1.5×最优（度量空间）|有理论保证|
|**元启发式**|遗传算法、模拟退火、蚁群|经验效果好|无最坏界|

---

## 5. 真实场景

|应用|点是什么？|为什么像 TSP？|
|---|---|---|
|物流派送|货车要送货的门店|最短路线 = 省油、省时|
|芯片布线|触点 / 焊接点|路径越短越节省布线资源|
|3D 打印 / CNC|需加工的轮廓|减少无效移动、提高效率|
|观光旅游|旅游城市/景点|设计最省路费的环游线|
|DNA 测序装配|片段作为“城市”|变体：最短超级串问题|

---

## 6. 小结

- **“一条线连所有点”** 只是 TSP 的外表；
    **真正挑战**在于让这条线**总长度最短且点不重复**。
    
- **Hamilton 路径/回路** 只关心“能不能连”；
    **TSP** 关心“怎么连最短”。
    
- 从暴力枚举到各种近似与元启发式，**没有万能快解**，但有很多“够快又够好”的折中方案。
    
- 如果你有具体规模/需求（例如 50 个节点、允许 5% 误差、需要 1 秒以内返回），可以再告诉我，我会帮你挑选最合适的算法或库 🚀
