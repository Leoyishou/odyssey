---
comment_id: 77b1404f
date created: 2024-10-13
date modified: 2025-05-02
draw: null
title: pandas
---
pandas åœ¨ä½¿ç”¨æ—¶è¯­æ³•æ„Ÿè§‰å¾ˆä¹±ï¼Œæœ‰ä»€ä¹ˆå­¦ä¹ çš„æŠ€å·§å—ï¼Ÿ- å¥•é«˜çš„å›ç­” - çŸ¥ä¹  
https://www.zhihu.com/question/289788451/answer/2167204031

## ç´¢å¼•å™¨å¯¹è±¡

- **è¯­æ³•**ï¼šåªæœ‰ `[]` æ‰èƒ½è§¦å‘è®¢é˜…æ“ä½œï¼ˆ`__getitem__` / `__setitem__`ï¼‰ï¼Œåœ†æ‹¬å·ä¸å…·å¤‡è¿™ä¸€è¯­ä¹‰ã€‚
    
- **pandas**ï¼š`df.loc`ã€`df.iloc` æœ¬è´¨æ˜¯ç´¢å¼•å™¨å¯¹è±¡ï¼Œè§„å®šâ€œ**ç”¨æ–¹æ‹¬å·è¡¨è¾¾æˆ‘æƒ³å–ä»€ä¹ˆ**â€ã€‚
    
- **ä»£ç å¯è¯»æ€§**ï¼šåœ¨æ•´ä¸ªç§‘å­¦è®¡ç®—ç”Ÿæ€ä¸­ï¼Œ`[]` å·²ç»çº¦å®šä¿—æˆåœ°ä»£è¡¨â€œç´¢å¼•/åˆ‡ç‰‡â€ï¼Œä¿æŒä¸€è‡´èƒ½å‡å°‘è®¤çŸ¥è´Ÿæ‹…ã€‚

## DataFrame

![CleanShot 2025-05-02 at 15.43.05@2x.png|1000](https://imagehosting4picgo.oss-cn-beijing.aliyuncs.com/imagehosting/fix-dir%2Fmedia%2Fmedia_FQKT0tTUKY%2F2025%2F05%2F02%2F15-43-48-f64a4b992f3086bcf56ae60f67f456aa-CleanShot%202025-05-02%20at%2015.43.05-2x-8b7998.png)

DataFramed çš„æœ¬è´¨æ˜¯`Map<String, List>`ï¼Œè€Œ ndArray çš„æœ¬è´¨æ˜¯ `List<List>`

DataFrame æ˜¯ pandas åº“ä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªè¡¨æ ¼æˆ–è€…ç”µå­è¡¨æ ¼,å°±åƒ Excel é‡Œçš„å·¥ä½œè¡¨ã€‚è¿™ä¸ª " è¡¨æ ¼ " æœ‰è¡Œå’Œåˆ—:

1. æ¯ä¸€åˆ—ä»£è¡¨ä¸€ç§ç±»å‹çš„æ•°æ® (æ¯”å¦‚å§“åã€å¹´é¾„ã€æˆç»©ç­‰)ã€‚
2. æ¯ä¸€è¡Œä»£è¡¨ä¸€æ¡å®Œæ•´çš„è®°å½•ã€‚

NumPyçš„æ ¸å¿ƒæ•°æ®ç»“æ„æ˜¯ndarrayï¼ˆN-dimensional arrayï¼ŒNç»´æ•°ç»„ï¼‰ã€‚è¿™ä¸pandasçš„DataFrameæœ‰äº›ä¸åŒï¼Œæ›´åƒæ˜¯Javaä¸­çš„æ•°ç»„ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªç»´åº¦ã€‚

   - æ‰€æœ‰å…ƒç´ ç±»å‹ç›¸åŒï¼Œè¿™ä½¿å¾—æ“ä½œæ›´å¿«ï¼ŒNumPyçš„ndarrayæ›´é€‚åˆæ•°å­¦è¿ç®—å’Œç§‘å­¦è®¡ç®—ã€‚
   - pandasçš„DataFrameæ›´é€‚åˆå¤„ç†è¡¨æ ¼å‹æ•°æ®ï¼Œç‰¹åˆ«æ˜¯å½“ä½ éœ€è¦ä¸åŒç±»å‹çš„æ•°æ®æˆ–å¸¦æ ‡ç­¾çš„æ•°æ®æ—¶ã€‚

å®é™…ä¸Šï¼Œpandasçš„DataFrameåœ¨å†…éƒ¨ä½¿ç”¨äº†NumPyçš„ndarrayã€‚ä½ å¯ä»¥æŠŠDataFrameçœ‹ä½œæ˜¯åœ¨ndarrayåŸºç¡€ä¸Šå¢åŠ äº†æ›´å¤šåŠŸèƒ½çš„æ•°æ®ç»“æ„ã€‚

ä»¥ä¸‹æ˜¯ä»æœ¬æ•™ç¨‹ä¸­æå–çš„ **pandas é«˜é¢‘ API cheatsheet**ï¼ŒæŒ‰ä¸»é¢˜åˆ†ç±»æ±‡æ€»ï¼Œæ–¹ä¾¿æŸ¥é˜…å­¦ä¹ ï¼š

## Pandas é«˜é¢‘ API Cheatsheetï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰

### ğŸ§± æ•°æ®ç»“æ„åˆ›å»º

| åŠŸèƒ½             | API ç¤ºä¾‹                            | è¯´æ˜                          |
|------------------|-------------------------------------|-------------------------------|
| åˆ›å»º Series      | `pd.Series([1, 2, 3])`              | åˆ›å»ºä¸€ç»´æ•°ç»„                  |
| åˆ›å»º DataFrame   | `pd.DataFrame({'A':[1,2],'B':[3,4]})`| åˆ›å»ºäºŒç»´è¡¨æ ¼ç»“æ„              |

### ğŸ“‚ æ•°æ®å¯¼å…¥å¯¼å‡º

| åŠŸèƒ½             | API ç¤ºä¾‹                            | è¯´æ˜                          |
|------------------|-------------------------------------|-------------------------------|
| è¯»å– CSV         | `pd.read_csv('file.csv')`           | ä» CSV æ–‡ä»¶è¯»å–               |
| å†™å…¥ CSV         | `df.to_csv('file.csv', index=False)`| ä¿å­˜ä¸º CSV æ–‡ä»¶               |

### ğŸ” æ•°æ®é€‰æ‹©ä¸ç­›é€‰

| åŠŸèƒ½             | API ç¤ºä¾‹                            | è¯´æ˜                          |
|------------------|-------------------------------------|-------------------------------|
| æŒ‰æ ‡ç­¾é€‰æ‹©       | `df.loc['a', 'A']`                  | æŒ‰ç´¢å¼•å’Œåˆ—åé€‰æ‹©              |
| æŒ‰ä½ç½®é€‰æ‹©       | `df.iloc[0, 1]`                     | æŒ‰æ•´æ•°ä½ç½®é€‰æ‹©                |
| åˆ‡ç‰‡é€‰æ‹©         | `df.loc['a':'c',['A', 'B']]`       | æ ‡ç­¾èŒƒå›´é€‰æ‹©å­é›†              |
| å¸ƒå°”ç­›é€‰         | `df[df['A']> 10]`                  | æ¡ä»¶ç­›é€‰è¡Œ                    |

### âœï¸ å¸¸è§åˆ—æ“ä½œ

| åŠŸèƒ½             | API ç¤ºä¾‹                            | è¯´æ˜                          |
|------------------|-------------------------------------|-------------------------------|
| æ·»åŠ æ–°åˆ—         | `df['C']= df['A']+ df['B']`       | åŸºäºç°æœ‰åˆ—è®¡ç®—æ–°åˆ—            |
| åˆ é™¤åˆ—           | `df.drop(columns=['B'])`            | åˆ é™¤æŒ‡å®šåˆ—                    |
| é‡å‘½ååˆ—         | `df.rename(columns={'A':'Alpha'})`  | ä¿®æ”¹åˆ—å                      |
| æ’åºè¡Œ           | `df.sort_values(by='A', ascending=False)` | æŒ‰åˆ—æ’åº                   |
| å”¯ä¸€å€¼           | `df['A'].unique()`                  | è¿”å›å”¯ä¸€å€¼æ•°ç»„                |
| å€¼é¢‘ç»Ÿè®¡         | `df['A'].value_counts()`            | å„å”¯ä¸€å€¼å‡ºç°æ¬¡æ•°              |

### â“ ç¼ºå¤±å€¼å¤„ç†

| åŠŸèƒ½             | API ç¤ºä¾‹                            | è¯´æ˜                          |
|------------------|-------------------------------------|-------------------------------|
| æ£€æµ‹ç¼ºå¤±å€¼       | `df.isnull()`                       | è¿”å›å¸ƒå°”çŸ©é˜µæ ‡è®°ç¼ºå¤±ä½ç½®      |
| å¡«å……ç¼ºå¤±å€¼       | `df.fillna(0)`                      | å°†ç¼ºå¤±å€¼æ›¿æ¢ä¸ºæŒ‡å®šå€¼          |
| åˆ é™¤å«ç¼ºå¤±è¡Œ     | `df.dropna()`                       | åˆ é™¤åŒ…å«ä»»æ„ NaN çš„è¡Œ         |
| åˆ é™¤å…¨ç¼ºå¤±è¡Œ     | `df.dropna(how='all')`              | åˆ é™¤æ•´è¡Œéƒ½æ˜¯ NaN çš„è¡Œ         |

### ğŸ“Š åˆ†ç»„ä¸èšåˆ

| åŠŸèƒ½             | API ç¤ºä¾‹                            | è¯´æ˜                          |
|------------------|-------------------------------------|-------------------------------|
| åˆ†ç»„             | `df.groupby('Category')`            | æŒ‰æŸåˆ—åˆ†ç»„                    |
| èšåˆæ±‚å’Œ         | `df.groupby('Category')['Value'].sum()` | æ¯ç»„æ±‚å’Œ                    |
| èšåˆå¹³å‡         | `df.groupby('Category')['Value'].mean()`| æ¯ç»„å¹³å‡å€¼                 |
| èšåˆè®¡æ•°         | `df.groupby('Category')['Value'].count()`| æ¯ç»„å…ƒç´ ä¸ªæ•°              |

### ğŸ”— æ‹¼æ¥ä¸åˆå¹¶

|æ“ä½œ|è¡Œæ•°å˜åŒ–|åˆ—æ•°å˜åŒ–|é”®çš„ä¿ç•™èŒƒå›´|å¸¸è§ç”¨é€”|
|---|---|---|---|---|
|`concat` (çºµå‘)|è¡Œ +=|åˆ— =|ä¸çœ‹é”®|æŠŠåŒç»“æ„æ•°æ®åˆ†æ‰¹æ±‡æ€»|
|`merge`-inner|â‰¤|= æˆ– +|**äº¤é›†**|åªè¦åŒæ–¹éƒ½æœ‰çš„è®°å½•|
|`merge`-outer|â‰¥|= æˆ– +|**å¹¶é›†**|å…¨é‡å¯¹é½ï¼Œåç»­æ¸…æ´—|

> è‹¥æƒ³åªä¿ç•™å·¦è¡¨å…¨éƒ¨è¡Œï¼Œç”¨ `how='left'`ï¼›
> åªä¿ç•™å³è¡¨å…¨éƒ¨è¡Œï¼Œç”¨ `how='right'`ã€‚

| åŠŸèƒ½             | API ç¤ºä¾‹                            | è¯´æ˜                          |
|------------------|-------------------------------------|-------------------------------|
| è¡Œæ‹¼æ¥ï¼ˆconcatï¼‰| `pd.concat([df1, df2], ignore_index=True)` | æ²¿ axis=0 åˆå¹¶             |
| åˆå¹¶ï¼ˆmergeï¼‰| `pd.merge(df1, df2, on='key')`      | ç±»ä¼¼ SQL çš„ join æ“ä½œ         |
| å¤–è¿æ¥           | `pd.merge(df1, df2, on='key', how='outer')`| åŒ…å«æ‰€æœ‰é”®ï¼Œç¼ºå¤±è¡¥ NaN    |

### ğŸ”§ å‡½æ•°åº”ç”¨

| åŠŸèƒ½             | API ç¤ºä¾‹                            | è¯´æ˜                          |
|------------------|-------------------------------------|-------------------------------|
| åº”ç”¨äº Series     | `df['A'].apply(lambda x: x*2)`      | å¯¹æ¯ä¸ªå…ƒç´ åº”ç”¨å‡½æ•°            |
| å­—å…¸æ˜ å°„         | `df['col'].map({'A':1, 'B':2})`     | å°†å€¼æ˜ å°„ä¸ºå…¶ä»–å€¼              |
| æŒ‰è¡Œ apply       | `df.apply(func, axis=1)`            | å°†å‡½æ•°ä½œç”¨äºæ¯è¡Œï¼ˆSeriesï¼‰|

### ğŸ§ª ç±»å‹è½¬æ¢

| åŠŸèƒ½      | API ç¤ºä¾‹                           | è¯´æ˜              |
| ------- | -------------------------------- | --------------- |
| æ”¹æ•°æ®ç±»å‹   | `df['A'].astype(float)`          | å¼ºåˆ¶ç±»å‹è½¬æ¢          |
| è½¬æ¢ä¸ºæ—¥æœŸæ—¶é—´ | `pd.to_datetime(df['date_str'])` | å­—ç¬¦ä¸²è§£æä¸º datetime |

### â±ï¸ æ—¶é—´åºåˆ—æ“ä½œ

| åŠŸèƒ½             | API ç¤ºä¾‹                            | è¯´æ˜                          |
|------------------|-------------------------------------|-------------------------------|
| åˆ›å»ºæ—¥æœŸç´¢å¼•     | `pd.date_range('2021-01-01', periods=10)` | ç”Ÿæˆæ—¥æœŸåºåˆ—             |
| è®¾ç½®ä¸ºæ—¶é—´ç´¢å¼•   | `df.index = pd.to_datetime(df['date'])` | æŒ‡å®šä¸ºæ—¶é—´ç´¢å¼•           |
| æ—¶é—´é‡é‡‡æ ·       | `df.resample('M').sum()`            | ä»¥æœˆä»½ä¸ºå•ä½æ±‡æ€»             |
