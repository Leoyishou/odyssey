import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,f as a,o as e}from"./app-DokaGNO4.js";const l={};function t(p,s){return e(),n("div",null,s[0]||(s[0]=[a(`<div class="language-mermaid line-numbers-mode" data-highlighter="shiki" data-ext="mermaid" data-title="mermaid" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Browser as 用户(浏览器)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant CF as Cloudflare(前台接待)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Nginx as Nginx(前台保安)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Backend as 后端服务(办公区)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Browser,Backend: 把整个系统比作一个高级写字楼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Nginx: Nginx配置就像保安的工作手册</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Nginx: SSL证书就像保安的门禁卡和工作证</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Browser-&gt;&gt;CF: 访客请求进入</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over CF: 检查访客身份</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    CF-&gt;&gt;Nginx: 转交给大楼保安</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Nginx: 使用门禁卡(SSL证书)验证身份</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    alt 请求静态资源</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Note over Nginx: 直接在前台处理</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Nginx--&gt;&gt;Browser: 返回资源(如宣传册)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    else 请求后端服务</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Nginx-&gt;&gt;Backend: 引导访客到办公区</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Backend--&gt;&gt;Nginx: 处理完返回</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Nginx--&gt;&gt;Browser: 送访客出门</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    end</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>让我用一个生活化的比喻来解释：</p><div class="language-mermaid line-numbers-mode" data-highlighter="shiki" data-ext="mermaid" data-title="mermaid" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Browser as 用户(浏览器)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant CF as Cloudflare(前台接待)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Nginx as Nginx(前台保安)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Backend as 后端服务(办公区)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Browser,Backend: 把整个系统比作一个高级写字楼</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Nginx: Nginx配置就像保安的工作手册</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Nginx: SSL证书就像保安的门禁卡和工作证</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Browser-&gt;&gt;CF: 访客请求进入</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over CF: 检查访客身份</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    CF-&gt;&gt;Nginx: 转交给大楼保安</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Nginx: 使用门禁卡(SSL证书)验证身份</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    alt 请求静态资源</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Note over Nginx: 直接在前台处理</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Nginx--&gt;&gt;Browser: 返回资源(如宣传册)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    else 请求后端服务</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Nginx-&gt;&gt;Backend: 引导访客到办公区</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Backend--&gt;&gt;Nginx: 处理完返回</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Nginx--&gt;&gt;Browser: 送访客出门</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    end</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>让我详细解释：</p><ol><li><p><strong>SSL证书的作用</strong>（门禁卡和工作证）：</p><ul><li>cert.pem 就像保安的工作证，用来证明&quot;我是真正的保安，不是冒充的&quot;</li><li>key.pem 就像保安的门禁卡，拥有开门和验证的权限</li><li>挂载这些文件就像是给保安配发工作证和门禁卡</li><li>如果证书文件有问题，就像保安的工作证或门禁卡失效了，无法正常工作</li></ul></li><li><p><strong>Nginx配置的作用</strong>（工作手册）：</p><ul><li>监听端口(80/443)就像保安要看管哪些门</li><li>SSL配置就像保安检查证件的规程</li><li>路由规则就像访客指引手册： <ul><li>静态文件请求：直接在前台解决</li><li>API请求：需要引导到办公区(后端服务)</li></ul></li></ul></li><li><p><strong>整个流程</strong>：</p><ul><li>用户访问网站，就像访客来到大楼</li><li>Cloudflare先验证，像前台接待初步登记</li><li>Nginx用SSL证书建立安全连接，像保安用工作证和门禁卡验证身份</li><li>然后按配置规则处理请求，像按工作手册指引访客</li></ul></li></ol><p>如果：</p><ul><li>证书文件错误 → 就像保安的工作证/门禁卡失效</li><li>Nginx配置错误 → 就像工作手册写错了</li><li>文件没有正确挂载 → 就像保安没带工作证和门禁卡来上班</li></ul><p>这就是为什么我们要：</p><ol><li>确保证书文件格式正确（工作证/门禁卡有效）</li><li>正确配置Nginx（工作手册准确）</li><li>正确挂载文件（保安带齐了证件）</li></ol><p>这样整个系统才能安全、正确地工作。</p><div class="language-mermaid line-numbers-mode" data-highlighter="shiki" data-ext="mermaid" data-title="mermaid" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Browser</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Cloudflare</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Server as Tencent Cloud Server</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Nginx as Frontend Container (Nginx)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant Backend as Backend Container</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    participant DB as PostgreSQL Container</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Browser-&gt;&gt;Cloudflare: 1. HTTPS Request to viva.liugongzi.org</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Cloudflare: SSL Termination</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Cloudflare: DDoS Protection</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Cloudflare: Cache Check</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Cloudflare-&gt;&gt;Server: 2. HTTP/HTTPS to 43.154.122.229</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Note over Server: Security Group&lt;br/&gt;Opens Port 80/443</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    Server-&gt;&gt;Nginx: 3. Request to Docker Port 80</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    alt Static Content (/*)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Nginx--&gt;&gt;Browser: 3a. Serve Static Files</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    else API Request (/api/*)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Nginx-&gt;&gt;Backend: 3b. Proxy to :8000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Backend-&gt;&gt;DB: 4. Query Data</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        DB--&gt;&gt;Backend: 5. Return Data</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Backend--&gt;&gt;Nginx: 6. JSON Response</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Nginx--&gt;&gt;Server: 7. Forward Response</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Server--&gt;&gt;Cloudflare: 8. Send Response</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        Cloudflare--&gt;&gt;Browser: 9. Return to Client</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    end</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11)]))}const h=i(l,[["render",t],["__file","Nginx.html.vue"]]),c=JSON.parse('{"path":"/2%20%E7%AC%AC%E4%BA%8C%E5%A4%A7%E8%84%91/1%20%E8%8A%82%E7%82%B9/CS/%E7%BD%91%E7%BB%9C/Nginx.html","title":"Nginx","lang":"zh-CN","frontmatter":{"draw":null,"title":"Nginx","tags":["Dev","信息革命"],"date created":"2024-03-28T00:00:00.000Z","date modified":"2024-11-12T00:00:00.000Z","description":"让我用一个生活化的比喻来解释： 让我详细解释： SSL证书的作用（门禁卡和工作证）： cert.pem 就像保安的工作证，用来证明\\"我是真正的保安，不是冒充的\\" key.pem 就像保安的门禁卡，拥有开门和验证的权限 挂载这些文件就像是给保安配发工作证和门禁卡 如果证书文件有问题，就像保安的工作证或门禁卡失效了，无法正常工作 Nginx配置的作用（工作...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/2%20%E7%AC%AC%E4%BA%8C%E5%A4%A7%E8%84%91/1%20%E8%8A%82%E7%82%B9/CS/%E7%BD%91%E7%BB%9C/Nginx.html"}],["meta",{"property":"og:site_name","content":"转了码的刘公子"}],["meta",{"property":"og:title","content":"Nginx"}],["meta",{"property":"og:description","content":"让我用一个生活化的比喻来解释： 让我详细解释： SSL证书的作用（门禁卡和工作证）： cert.pem 就像保安的工作证，用来证明\\"我是真正的保安，不是冒充的\\" key.pem 就像保安的门禁卡，拥有开门和验证的权限 挂载这些文件就像是给保安配发工作证和门禁卡 如果证书文件有问题，就像保安的工作证或门禁卡失效了，无法正常工作 Nginx配置的作用（工作..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-24T16:17:22.000Z"}],["meta",{"property":"article:tag","content":"Dev"}],["meta",{"property":"article:tag","content":"信息革命"}],["meta",{"property":"article:modified_time","content":"2024-11-24T16:17:22.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nginx\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-24T16:17:22.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"转了码的刘公子\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[],"git":{"createdTime":1732465042000,"updatedTime":1732465042000,"contributors":[{"name":"Luis","email":"liuysh20@gmail.com","commits":1}]},"readingTime":{"minutes":3.12,"words":936},"filePathRelative":"2 第二大脑/1 节点/CS/网络/Nginx.md","localizedDate":"2024年11月25日","autoDesc":true}');export{h as comp,c as data};
