---
date created: 2024-12-30
date modified: 2025-07-10
uid: 74b98416-0a9c-4f92-8be8-b80644a4f54f
---

EOF (End Of File) 是"文件结束"的意思。在网络编程中，EOF 表示数据流的结束。

在你的 webget 程序中：

```cpp
while (!socket.eof()) {
    cout << socket.read();
}
```

这段代码的工作原理是：

1. `socket.eof()` 检查是否到达了数据流的末尾：
   - 当服务器完成数据发送并关闭连接时，客户端的 socket 会收到 EOF
   - 在 HTTP 中，这发生在服务器发送完所有响应数据后

2. 为什么需要检查 EOF：
   - HTTP 响应可能很大，不能一次性读取完
   - 需要循环读取直到没有更多数据
   - EOF 信号告诉我们服务器已经发送完所有数据

3. 实际场景举例：

```Java
客户端                    服务器
   |                        |
   |--- HTTP 请求 --------->|
   |                        |
   |<-- 响应第一部分 -------|
   |<-- 响应第二部分 -------|
   |<-- 响应第三部分 -------|
   |<-- EOF 信号 ------------|  (服务器关闭连接)
   |                        |
```

这就是为什么我们建议在发送完请求后调用 `socket.shutdown(SHUT_WR)`：

```cpp
socket.write(message);
socket.shutdown(SHUT_WR);  // 告诉服务器我们已经发送完请求
```

这样：

1. 服务器知道请求已经完成
2. 服务器会发送响应
3. 发送完响应后关闭连接
4. 客户端收到 EOF，知道所有数据都已接收
